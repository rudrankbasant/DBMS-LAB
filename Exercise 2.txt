///////////// EXERCISE 2

//EMPLOYEE TABLE
ALTER TABLE EMPLOYEE MODIFY(F_NAME VARCHAR(15) CONSTRAINT C1 NOT NULL);
ALTER TABLE EMPLOYEE MODIFY(L_NAME VARCHAR(15) CONSTRAINT C2 NOT NULL);
ALTER TABLE EMPLOYEE MODIFY(SSN_NUMBER CHAR(9) CONSTRAINT PK PRIMARY KEY);
ALTER TABLE EMPLOYEE ADD CONSTRAINT SEXCHK CHECK ( SEX='M' OR SEX='m' OR SEX='F' OR SEX='f');
ALTER TABLE EMPLOYEE MODIFY SALARY DEFAULT 800;
ALTER TABLE EMPLOYEE ADD CONSTRAINT FK FOREIGN KEY(SUPERVISOR_SSN) REFERENCES EMPLOYEE(SSN_NUMBER) ON DELETE SET NULL;
ALTER TABLE DEPT ADD CONSTRAINT DEPT_PK PRIMARY KEY(DEPT_NO);
ALTER TABLE EMPLOYEE ADD CONSTRAINT FK2 FOREIGN KEY(DEPT_NUMBER) REFERENCES DEPT(DEPT_NO) ON DELETE CASCADE;

//DEPARTMENT TABLE
 ALTER TABLE DEPT MODIFY(DEPT_NAME VARCHAR(15) CONSTRAINT DPTNN NOT NULL);
 ALTER TABLE DEPT ADD CONSTRAINT DEPTFK FOREIGN KEY(MANAGERSSN) REFERENCES EMPLOYEE(SSN_NUMBER) ON DELETE SET NULL;

//DEPARTMENT LOCATION TABLE
CREATE TABLE DEPT_LOC(DEPT_NO NUMBER(5), DEPT_LOCATION VARCHAR(15));
ALTER TABLE DEPT_LOC ADD CONSTRAINT DLOCFK FOREIGN KEY(DEPT_NO) REFERENCES DEPT(DEPT_NO) ON DELETE CASCADE;

//PROJECT TABLE
ALTER TABLE PROJECT MODIFY(PROJECTNAME VARCHAR(15) CONSTRAINT PNN NOT NULL);
ALTER TABLE PROJECT ADD CONSTRAINT PPK PRIMARY KEY(PROJECTNUMBER);
ALTER TABLE PROJECT ADD CONSTRAINT PFK FOREIGN KEY(DEPT_NO) REFERENCES DEPT(DEPT_NO) ON DELETE SET NULL;

//WORKS_ON TABLE
CREATE TABLE WORKS_ON(EMP_SSN CHAR(9), P_NO NUMBER(5), HOURS DECIMAL(3,1));
ALTER TABLE WORKS_ON ADD CONSTRAINT WFK FOREIGN KEY(EMP_SSN) REFERENCES EMPLOYEE(SSN_NUMBER) ON DELETE CASCADE;
ALTER TABLE WORKS_ON ADD CONSTRAINT WFK2 FOREIGN KEY(P_NO) REFERENCES PROJECT(PROJECTNUMBER) ON DELETE CASCADE;
ALTER TABLE WORKS_ON MODIFY(HOURS DECIMAL(3,1) NOT NULL);

//DEPENDENT TABLE
CREATE TABLE DEPENDENT(EMPLOYEE CHAR(9), DEPENDENT_NAME VARCHAR(15), SEX CHAR(1), BDAY DATE, RELATIONSHIP VARCHAR(8));
ALTER TABLE DEPENDENT ADD CONSTRAINT DEPENFK2 FOREIGN KEY(EMPLOYEE) REFERENCES EMPLOYEE(SSN_NUMBER) ON DELETE CASCADE;
ALTER TABLE DEPENDENT ADD CONSTRAINT DEPENCHK CHECK(SEX='M' OR SEX='F' OR SEX='m' OR SEX='f');

//INSERT VALUES INTO DEPT LOCATION TABLES
INSERT INTO DEPT_LOC VALUES(1, 'HOUSTON');
INSERT INTO DEPT_LOC VALUES(1, 'CHICAGO');
INSERT INTO DEPT_LOC VALUES(2, 'NEW YORK');
INSERT INTO DEPT_LOC VALUES(2, 'SAN FRANCISCO');
INSERT INTO DEPT_LOC VALUES(3, 'SALT LAKE CITY');
INSERT INTO DEPT_LOC VALUES(4, 'STAFFORD');
INSERT INTO DEPT_LOC VALUES(4, 'BELLAIRE');
INSERT INTO DEPT_LOC VALUES(5, 'SUGARLAND');
INSERT INTO DEPT_LOC VALUES(5, 'HOUSTON');

//INSERT VALUES INTO WORKS ON TABLES
INSERT INTO WORKS_ON VALUES('123456789',3388,32.5);
INSERT INTO WORKS_ON VALUES('123456789',1945,7.5);
INSERT INTO WORKS_ON VALUES('666884444',3388,40.0);
INSERT INTO WORKS_ON VALUES('453453453',77,20.0);
INSERT INTO WORKS_ON VALUES('453453453',22,20.0);
INSERT INTO WORKS_ON VALUES('333445555',77,10.0);
INSERT INTO WORKS_ON VALUES('333445555',6688,10.0);
INSERT INTO WORKS_ON VALUES('333445555',43,35.0);
INSERT INTO WORKS_ON VALUES('333445555',22,28.5);
INSERT INTO WORKS_ON VALUES('999887777',1,11.5);
INSERT INTO WORKS_ON VALUES('999887777',12,13.0);
INSERT INTO WORKS_ON VALUES('543216789',22,17.0);
INSERT INTO WORKS_ON VALUES('554433221',1945,21.5);

//INSERT VALUES INTO DEPENDENT TABLE
INSERT INTO DEPENDENT VALUES('333445555','ALICE','F','05-APR-76','DAUGHTER');
INSERT INTO DEPENDENT VALUES('333445555','THEODORE','M','25-OCT-73','SON');
INSERT INTO DEPENDENT VALUES('333445555','JOY','F','03-MAY-48','SPOUSE');
INSERT INTO DEPENDENT VALUES('987654321','ABNER','M','29-FEB-32','SPOUSE');
INSERT INTO DEPENDENT VALUES('123456789','ALICE','F','31-DEC-78','DAUGHTER');
INSERT INTO DEPENDENT VALUES('123456789','ELIZABETH','F','05-MAY-57','SPOUSE');

//EXERCISE II

Execute the following Query on the Db to display and discuss the integrity constraints
violated by any of the following operations
1. Insert ('Robert', 'F', 'Scott', '943775543', '21-JUN-42', '2365 Newcastle Rd, Bellaire,
TX', M, 58000, '888665555', 1 ) into EMPLOYEE.
2. Insert ( '677678989', null, '40.0' ) into WORKS_ON.
3. Insert ( '453453453', 'John', M, '12-DEC-60', 'SPOUSE' ) into DEPENDENT
4. Delete the WORKS_ON tuples with ESSN= '333445555'.
5. Modify the MGRSSN and MGRSTARTDATE of the DEPARTMENT tuple with
DNUMBER=5 to '123456789' and '01-OCT-88', respectively. 


1. INSERT INTO EMPLOYEE VALUES('Robert', 'F', 'Scott', '943775543', '21-JUN-42', '2365 Newcastle Rd, Bellaire,
TX', 'M', 58000, '888665555', 1 );

2. INSERT INTO WORKS_ON VALUES ( '677678989', NULL, '40.0' );

3. INSERT INTO DEPENDENT VALUES( '453453453', 'John', 'M', '12-DEC-60', 'SPOUSE' );

4. DELETE FROM WORKS_ON WHERE EMP_SSN= '333445555';

5. UPDATE DEPT SET MANAGERSSN = '123456789', MANAGESTARTDATE = '01-OCT-88' WHERE DEPT_NO=5;


Alter the tables to
1. Add Foreign Keys using Alter Table [if not done earlier].
2. Drop Foreign key defined on SuperSSN and add it using Alter table command.
3. Make name of Project as Unique and sex of employee as not null.
4. Make Address as a new type containing door no, street, city, State, Continent.
5. Make salary of employee to accept real values. 


1. ALTER TABLE DEPENDENT ADD CONSTRAINT DEPENFK2 FOREIGN KEY(EMPLOYEE) REFERENCES EMPLOYEE(SSN_NUMBER) ON DELETE CASCADE;

2. ALTER TABLE EMPLOYEE DROP CONSTRAINT FK;
   ALTER TABLE EMPLOYEE ADD CONSTRAINT FK FOREIGN KEY(SUPERVISOR_SSN) REFERENCES EMPLOYEE(SSN_NUMBER) ON DELETE SET NULL;

3. ALTER TABLE PROJECT MODIFY(PROJECTNAME VARCHAR(15) CONSTRAINT UN UNIQUE);
   ALTER TABLE EMPLOYEE MODIFY(SEX CHAR(1) CONSTRAINT SNN NOT NULL);







